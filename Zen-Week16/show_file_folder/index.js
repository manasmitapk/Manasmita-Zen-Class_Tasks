const { response } = require("express");
const express = require("express");

const fs = require("fs")

const app = express();
app.listen(3005, ()=>console.log("Application is running on port:3005"))
app.get("/", (request, response)=>{
    response.send("<h1>This is a Home page</h1>")
});




let folderPath = "./myFolder/";
app.get("/list", (request, response)=>{
    fs.readdir(folderPath, (err, fileNames)=>{
        if(err){
           throw err;
        }
        let result = "<table>";
        fileNames.forEach((fileName)=>{
            if(fs.lstatSync(folderPath + fileName).isDirectory()){
                result += "<tr><td>" +"<td> <img src='data:image/jpeg;base64,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' alt = 'Folder' height = '150px', width = '150px'</img></td><td><h2>" + fileName + "</h2></td></tr>"
            }
            else{
                result += "<tr><td>" +"<td> <img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAMAAAAL34HQAAAAb1BMVEX///8AAAD5+flQUFDb29sjIyNXV1fi4uIYGBj6+voHBwepqambm5vS0tK/v79oaGh6enotLS1AQEASEhJjY2OhoaFFRUXt7e3h4eEcHBw0NDTGxsYPDw9vb28kJCTq6uqPj4+ysrJ/f3+SkpIyMjIwtSvtAAACzklEQVR4nO3c25aiMBAF0ADeCIJCq8hF8dL//43d0/NgVByT1CnGXtZ5V/aqYkEMJUpJJBKJ5C0Tlp1bygFQ2/OqyJ1SbxaHpow5UWFS68AjH/Uh5YOFhw8f1E+qVRMysY7+qj+w5ZZF1RUU1XfqjKOTidd5dVWwNYNrSVUFwWwNP8HiFZ317ULXK5wAWHgXhgXvo8HSdWGb++svuF4Ga5yGtmnur3VYl8kaWX8q7bkEQ/uIY0HrBWQhXUgWsI9QFq5eZJZmcZFZmw1HH8ms1ejWhagXnaU4XADWvYveRwSLoV4QFt6FYcH7CGKh64VigV0wFraPOBa0XkAW0oVkAfsIZeHqhWXBXGAWqo9oFqhecBbGhWdB+sjAQtSLgwVwsbDoLh7WratKXoN169o3A7Mm22lftll+5YrcnsaQWe34Qdorlp4Py7JNPX1Jllu5BmMFhcvZ5cea5v84/oO0GTsrXLizgh07S2XMXfRkhSf3J1izlJ2lyp2zSx/5Wao8566w9QAspbbJchI9TX1hOVy5CCylYovnMGs9OMsmibCEJSxhDcSKCWFjTc+7hXd2ibGEQbLKKKBEny4FQ7Kytu9o9vnsWFjUMaV971f9d1b/VwlLWEodqaf8ZY4RyUrHNFZ02cVFsuJ5Xs28UxXGJhv05hN3qX9G5s/n91hBCEtYwhLW72LFo8w/TWccAMkKz3vtn7Y29rqhK4gqIGVzuSu+0jKQab31oqtTYQmL61e1z5MmMzXPHkQ5IZWrPfDs2KhuvvTP6WhM1bzDrVpYwhKWsIQlLGEJS1jCElYPq8p6x4CJOVNZuno0B0zJLCCy2PP7WQrx9gzLOIwsqtNgKu0yPUzdBbHPp8toOnFuxT765KBSqtkPw4q65xYzxyFceuMw0fyTuImIkz7PU+08XqVUZofV8zFg/yzmqef/Oq1fyuIT1teHSSQSieRvvgBm6GqGbCGb7gAAAABJRU5ErkJggg==' alt = 'Folder' height = '150px', width = '150px'</img></td><td><h2>" + fileName + "</h2></td></tr>"
            }           
            
        })
        result += "</table>";
        response.send(result);
    });
});
